---
title: åœ¨ LobeChat ä¸­é…ç½® Casdoor èº«ä»½éªŒè¯
description: å­¦ä¹ å¦‚ä½•åœ¨ LobeChat ä¸­é…ç½® Casdoor SSOï¼ŒåŒ…æ‹¬åˆ›å»ºåº”ç”¨å’Œè®¾ç½®ç¯å¢ƒå˜é‡ã€‚
tags:
  - Casdoor
  - èº«ä»½éªŒè¯
  - LobeChat
  - å•ç‚¹ç™»å½•
  - OIDC
---

# é…ç½® Casdoor èº«ä»½éªŒè¯

[Casdoor](https://casdoor.org/) æ˜¯ä¸€ä¸ªå¼€æºçš„èº«ä»½è®¿é—®ç®¡ç† (IAM) å¹³å°ï¼Œæä¾› Web UI æ”¯æŒå•ç‚¹ç™»å½•ã€‚

<Steps>
  ### åœ¨ Casdoor ä¸­åˆ›å»ºåº”ç”¨

  1. ç™»å½• Casdoor ç®¡ç†æ§åˆ¶å°
  2. å‰å¾€ **Applications**ï¼Œç‚¹å‡» **Add**
  3. é…ç½®åº”ç”¨ï¼š
     - Name: `LobeChat`
     - Organization: é€‰æ‹©ä½ çš„ç»„ç»‡
     - Redirect URLs: æ·»åŠ å›è°ƒ URL

  <Callout type={'info'}>
    **å›è°ƒ URL æ ¼å¼**: `https://your-domain.com/api/auth/callback/casdoor`
  </Callout>

  4. ä¿å­˜å¹¶è®°ä¸‹ **Client ID** å’Œ **Client Secret**

  ### è·å– Issuer URL

  Issuer URL æ˜¯ Casdoor æœåŠ¡å™¨ URLï¼Œé€šå¸¸ä¸ºï¼š`https://your-casdoor-domain`

  ### é…ç½®ç¯å¢ƒå˜é‡

  åœ¨éƒ¨ç½² LobeChat æ—¶ï¼Œä½ éœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

  | ç¯å¢ƒå˜é‡                     | ç±»å‹ | æè¿°                                                |
  | ------------------------ | -- | ------------------------------------------------- |
  | `AUTH_SECRET`            | å¿…é€‰ | ç”¨äºåŠ å¯†ä¼šè¯ä»¤ç‰Œçš„å¯†é’¥ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆï¼š`openssl rand -base64 32`    |
  | `AUTH_SSO_PROVIDERS`     | å¿…é€‰ | SSO æä¾›å•†ã€‚ä½¿ç”¨ Casdoor è¯·å¡«å†™ `casdoor`                  |
  | `AUTH_CASDOOR_ID`        | å¿…é€‰ | Casdoor åº”ç”¨çš„ Client ID                             |
  | `AUTH_CASDOOR_SECRET`    | å¿…é€‰ | Casdoor åº”ç”¨çš„ Client Secret                         |
  | `AUTH_CASDOOR_ISSUER`    | å¿…é€‰ | Casdoor æœåŠ¡å™¨ URLï¼ˆä¾‹å¦‚ `https://your-casdoor-domain`ï¼‰ |
  | `CASDOOR_WEBHOOK_SECRET` | å¯é€‰ | ç”¨äºéªŒè¯ Casdoor å‘é€çš„ Webhook è¯·æ±‚æ˜¯å¦åˆæ³•çš„å¯†é’¥                |

  <Callout type={'tip'}>
    å‰å¾€ [ğŸ“˜ ç¯å¢ƒå˜é‡](/zh/docs/self-hosting/environment-variables/auth#casdoor) å¯æŸ¥é˜…ç›¸å…³å˜é‡è¯¦æƒ…ã€‚
  </Callout>

  ### é…ç½® Webhookï¼ˆå¯é€‰ï¼‰

  > åœ¨ Casdoor `>=1.843.0` ä¸Šå¯ç”¨ã€‚

  é…ç½® Casdoor çš„ [Webhook](https://www.casdoor.org/docs/webhooks/overview#setting-up-a-webhook) ä»¥ä¾¿åœ¨ç”¨æˆ·ä¿¡æ¯æ›´æ–°æ—¶åŒæ­¥åˆ° LobeChatã€‚

  **åŒæ­¥çš„æ•°æ®å­—æ®µ**ï¼š

  - å¤´åƒ (`avatar`)
  - é‚®ç®± (`email`)
  - æ˜¾ç¤ºåç§° (`displayName`)

  **é…ç½®æ­¥éª¤**ï¼š

  1. å‰å¾€ `ç®¡ç†å·¥å…·` -> `Webhooks`ï¼Œåˆ›å»ºä¸€ä¸ª Webhook
  2. å¡«å†™ä»¥ä¸‹å­—æ®µï¼š
     - é“¾æ¥ï¼š`https://your-domain.com/api/webhooks/casdoor`
     - æ–¹æ³•ï¼š`POST`
     - å†…å®¹ç±»å‹ï¼š`application/json`
     - åè®®å¤´ï¼š`casdoor-secret`: `ä½ çš„Webhookå¯†é’¥`
     - äº‹ä»¶ï¼š`update-user`
  3. å¯†é’¥å¯å‰å¾€ [generate-secret.vercel.app/10](https://generate-secret.vercel.app/10) ç”Ÿæˆ
  4. å°†å¯†é’¥å¡«å†™åˆ°ç¯å¢ƒå˜é‡ `CASDOOR_WEBHOOK_SECRET`
</Steps>

<Callout type={'info'}>éƒ¨ç½²æˆåŠŸåï¼Œç”¨æˆ·å°†å¯ä»¥é€šè¿‡ Casdoor èº«ä»½è®¤è¯å¹¶ä½¿ç”¨ LobeChatã€‚</Callout>

## ç›¸å…³èµ„æº

- [Casdoor æ–‡æ¡£](https://casdoor.org/docs/overview)
- [Casdoor åº”ç”¨é…ç½®](https://casdoor.org/docs/application/config)
