---
title: åœ¨ LobeChat ä¸­é…ç½® AWS Cognito èº«ä»½éªŒè¯
description: å­¦ä¹ å¦‚ä½•åœ¨ LobeChat ä¸­é…ç½® AWS Cognito SSOï¼ŒåŒ…æ‹¬åœ¨ AWS Console åˆ›å»ºç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯ã€‚
tags:
  - AWS Cognito
  - èº«ä»½éªŒè¯
  - LobeChat
  - å•ç‚¹ç™»å½•
---

# é…ç½® AWS Cognito èº«ä»½éªŒè¯

<Steps>
  ### åˆ›å»º Cognito ç”¨æˆ·æ± 

  1. å‰å¾€ [AWS Cognito Console](https://console.aws.amazon.com/cognito/)
  2. ç‚¹å‡» **Create user pool**
  3. é…ç½®ç™»å½•ä½“éªŒï¼š
     - é€‰æ‹© **Email** ä½œä¸ºç™»å½•é€‰é¡¹
     - æ ¹æ®éœ€è¦é…ç½®å¯†ç ç­–ç•¥å’Œ MFA è®¾ç½®
     - é…ç½®ç”¨æˆ·è´¦æˆ·æ¢å¤é€‰é¡¹

  ### é…ç½®åº”ç”¨å®¢æˆ·ç«¯

  åœ¨ **App integration** éƒ¨åˆ†ï¼š

  1. ç‚¹å‡» **Add an app client**
  2. é€‰æ‹© **Confidential client** ä½œä¸ºåº”ç”¨ç±»å‹
  3. è¾“å…¥åº”ç”¨å®¢æˆ·ç«¯åç§°
  4. åœ¨ **OAuth 2.0 grant types** ä¸‹ï¼Œå¯ç”¨ **Authorization code grant**
  5. åœ¨ **OpenID Connect scopes** ä¸‹ï¼Œé€‰æ‹© `email`ã€`openid` å’Œ `profile`

  ### é…ç½®å›è°ƒ URL

  åœ¨åº”ç”¨å®¢æˆ·ç«¯è®¾ç½®ä¸­ï¼Œæ·»åŠ å›è°ƒ URLï¼š

  <Callout type={'info'}>
    å›è°ƒ URL æ ¼å¼ï¼š

    - æœ¬åœ°å¼€å‘: `http://localhost:3210/api/auth/callback/cognito`
    - ç”Ÿäº§ç¯å¢ƒ: `https://your-domain.com/api/auth/callback/cognito`
  </Callout>

  ### é…ç½®åŸŸå

  1. å‰å¾€ **App integration** > **Domain**
  2. é…ç½® Cognito åŸŸåï¼ˆå¦‚ `your-app-name`ï¼‰æˆ–è‡ªå®šä¹‰åŸŸå
  3. è®°å½•å®Œæ•´åŸŸåï¼ˆå¦‚ `your-app-name.auth.us-east-1.amazoncognito.com`ï¼‰

  ### è·å–é…ç½®å€¼

  æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š

  - **Client ID**ï¼šæ¥è‡ªåº”ç”¨å®¢æˆ·ç«¯è®¾ç½®
  - **Client Secret**ï¼šæ¥è‡ªåº”ç”¨å®¢æˆ·ç«¯è®¾ç½®ï¼ˆç‚¹å‡» "Show client secret"ï¼‰
  - **User Pool ID**ï¼šæ¥è‡ªç”¨æˆ·æ± æ¦‚è§ˆï¼ˆå¦‚ `us-east-1_XXXXXXXXX`ï¼‰
  - **Region**ï¼šAWS åŒºåŸŸï¼ˆå¦‚ `us-east-1`ï¼‰
  - **Domain**ï¼šä½ çš„ Cognito åŸŸå

  ### é…ç½®ç¯å¢ƒå˜é‡

  | ç¯å¢ƒå˜é‡                             | ç±»å‹ | æè¿°                                                        |
  | -------------------------------- | -- | --------------------------------------------------------- |
  | `AUTH_SECRET`                    | å¿…é€‰ | ä¼šè¯åŠ å¯†å¯†é’¥ï¼Œä½¿ç”¨ `openssl rand -base64 32` ç”Ÿæˆ                    |
  | `AUTH_SSO_PROVIDERS`             | å¿…é€‰ | å¡«å†™ `cognito`                                              |
  | `AUTH_COGNITO_ID`                | å¿…é€‰ | åº”ç”¨å®¢æˆ·ç«¯ ID                                                  |
  | `AUTH_COGNITO_SECRET`            | å¿…é€‰ | åº”ç”¨å®¢æˆ·ç«¯ Secret                                              |
  | `AUTH_COGNITO_DOMAIN`            | å¿…é€‰ | Cognito åŸŸåï¼ˆå¦‚ `your-app.auth.us-east-1.amazoncognito.com`ï¼‰ |
  | `AUTH_COGNITO_REGION`            | å¿…é€‰ | AWS åŒºåŸŸï¼ˆå¦‚ `us-east-1`ï¼‰                                     |
  | `AUTH_COGNITO_USERPOOL_ID`       | å¿…é€‰ | ç”¨æˆ·æ±  IDï¼ˆå¦‚ `us-east-1_XXXXXXXXX`ï¼‰                           |

  <Callout type={'tip'}>
    å‰å¾€ [ğŸ“˜ ç¯å¢ƒå˜é‡](/zh/docs/self-hosting/environment-variables/auth#cognito)
    å¯æŸ¥é˜…ç›¸å…³å˜é‡è¯¦æƒ…ã€‚
  </Callout>
</Steps>

<Callout type={'info'}>
  éƒ¨ç½²æˆåŠŸåï¼Œç”¨æˆ·å°†å¯ä»¥é€šè¿‡ AWS Cognito èº«ä»½è®¤è¯å¹¶ä½¿ç”¨ LobeChatã€‚
</Callout>

## ç›¸å…³èµ„æº

- [AWS Cognito Console](https://console.aws.amazon.com/cognito/)
- [Amazon Cognito æ–‡æ¡£](https://docs.aws.amazon.com/cognito/)
