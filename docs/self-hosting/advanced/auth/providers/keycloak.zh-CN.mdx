---
title: åœ¨ LobeChat ä¸­é…ç½® Keycloak èº«ä»½éªŒè¯
description: å­¦ä¹ å¦‚ä½•åœ¨ LobeChat ä¸­é…ç½® Keycloak SSOï¼ŒåŒ…æ‹¬åˆ›å»ºå®¢æˆ·ç«¯å’Œè®¾ç½®ç¯å¢ƒå˜é‡ã€‚
tags:
  - Keycloak
  - èº«ä»½éªŒè¯
  - LobeChat
  - å•ç‚¹ç™»å½•
---

# é…ç½® Keycloak èº«ä»½éªŒè¯

[Keycloak](https://www.keycloak.org/) æ˜¯ä¸€ä¸ªå¼€æºçš„èº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

<Steps>
  ### åœ¨ Keycloak ä¸­åˆ›å»ºå®¢æˆ·ç«¯

  1. ç™»å½• Keycloak ç®¡ç†æ§åˆ¶å°
  2. é€‰æ‹©ä½ çš„ realmï¼ˆæˆ–åˆ›å»ºæ–°çš„ï¼‰
  3. å‰å¾€ **Clients** > **Create client**
  4. é…ç½®å®¢æˆ·ç«¯ï¼š
     - **Client type**: `OpenID Connect`
     - **Client ID**: `lobechat`ï¼ˆæˆ–ä»»æ„åç§°ï¼‰
  5. ç‚¹å‡» **Next**
  6. å¯ç”¨ **Client authentication**ï¼ˆOnï¼‰
  7. ç‚¹å‡» **Next** ç„¶å **Save**

  ### é…ç½®é‡å®šå‘ URI

  åœ¨å®¢æˆ·ç«¯ **Settings** æ ‡ç­¾é¡µä¸­ï¼š

  1. åœ¨ **Valid redirect URIs** ä¸‹æ·»åŠ é‡å®šå‘ URI

  <Callout type={'info'}>
    å›è°ƒ URL æ ¼å¼ï¼š

    - æœ¬åœ°å¼€å‘: `http://localhost:3210/api/auth/callback/keycloak`
    - ç”Ÿäº§ç¯å¢ƒ: `https://your-domain.com/api/auth/callback/keycloak`
  </Callout>

  ### è·å–å®¢æˆ·ç«¯å¯†é’¥

  å‰å¾€ **Credentials** æ ‡ç­¾é¡µå¤åˆ¶ **Client secret**ã€‚

  ### è·å– Issuer URL

  Issuer URL æ ¼å¼ï¼š`https://your-keycloak-domain/realms/your-realm`

  ä¾‹å¦‚ï¼š`https://keycloak.example.com/realms/master`

  ### é…ç½®ç¯å¢ƒå˜é‡

  | ç¯å¢ƒå˜é‡                             | ç±»å‹ | æè¿°                                               |
  | -------------------------------- | -- | ------------------------------------------------ |
  | `AUTH_SECRET`                    | å¿…é€‰ | ä¼šè¯åŠ å¯†å¯†é’¥ï¼Œä½¿ç”¨ `openssl rand -base64 32` ç”Ÿæˆ           |
  | `AUTH_SSO_PROVIDERS`             | å¿…é€‰ | å¡«å†™ `keycloak`                                    |
  | `AUTH_KEYCLOAK_ID`               | å¿…é€‰ | Client ID                                        |
  | `AUTH_KEYCLOAK_SECRET`           | å¿…é€‰ | Client Secret                                    |
  | `AUTH_KEYCLOAK_ISSUER`           | å¿…é€‰ | `https://your-keycloak-domain/realms/your-realm` |

  <Callout type={'tip'}>
    å‰å¾€ [ğŸ“˜ ç¯å¢ƒå˜é‡](/zh/docs/self-hosting/environment-variables/auth#keycloak)
    å¯æŸ¥é˜…ç›¸å…³å˜é‡è¯¦æƒ…ã€‚
  </Callout>
</Steps>

<Callout type={'info'}>
  éƒ¨ç½²æˆåŠŸåï¼Œç”¨æˆ·å°†å¯ä»¥é€šè¿‡ Keycloak èº«ä»½è®¤è¯å¹¶ä½¿ç”¨ LobeChatã€‚
</Callout>

## ç›¸å…³èµ„æº

- [Keycloak æ–‡æ¡£](https://www.keycloak.org/documentation)
- [Keycloak OpenID Connect æŒ‡å—](https://www.keycloak.org/docs/latest/securing_apps/#_oidc)
