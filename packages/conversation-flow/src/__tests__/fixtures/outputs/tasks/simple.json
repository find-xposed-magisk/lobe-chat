{
  "contextTree": [
    {
      "id": "msg-user-1",
      "type": "message"
    },
    {
      "children": [
        {
          "id": "msg-assistant-1",
          "type": "message",
          "tools": ["msg-tool-1"]
        }
      ],
      "id": "msg-assistant-1",
      "type": "assistantGroup"
    },
    {
      "children": [
        {
          "id": "msg-task-hangzhou",
          "type": "message"
        },
        {
          "id": "msg-task-beijing",
          "type": "message"
        }
      ],
      "id": "tasks-msg-tool-1-msg-task-hangzhou-msg-task-beijing",
      "messageId": "msg-tool-1",
      "type": "tasks"
    },
    {
      "id": "msg-assistant-summary",
      "type": "message"
    }
  ],
  "flatList": [
    {
      "id": "msg-user-1",
      "role": "user",
      "content": "Help me create two tasks to research the weather in Hangzhou and Beijing tomorrow.",
      "parentId": null,
      "createdAt": 1735526559382,
      "updatedAt": 1735526559382,
      "meta": {}
    },
    {
      "id": "msg-assistant-1",
      "role": "assistantGroup",
      "content": "",
      "parentId": "msg-user-1",
      "createdAt": 1735526560163,
      "updatedAt": 1735526585550,
      "meta": {},
      "model": "deepseek-chat",
      "provider": "deepseek",
      "children": [
        {
          "content": "I'll help you create two async tasks to research the weather in Hangzhou and Beijing.",
          "id": "msg-assistant-1",
          "performance": {
            "duration": 11935,
            "latency": 13425,
            "tps": 29.33,
            "ttft": 1490
          },
          "tools": [
            {
              "id": "call_exec_tasks_1",
              "type": "builtin",
              "apiName": "execTasks",
              "arguments": "{\"tasks\": [{\"description\": \"Research Hangzhou weather\", \"instruction\": \"Search for Hangzhou weather tomorrow.\"}, {\"description\": \"Research Beijing weather\", \"instruction\": \"Search for Beijing weather tomorrow.\"}]}",
              "identifier": "lobe-gtd",
              "result": {
                "content": "Triggered 2 async tasks for execution:\n1. Research Hangzhou weather\n2. Research Beijing weather",
                "id": "msg-tool-1",
                "state": {
                  "type": "execTasks",
                  "tasks": [
                    {
                      "description": "Research Hangzhou weather",
                      "instruction": "Search for Hangzhou weather tomorrow."
                    },
                    {
                      "description": "Research Beijing weather",
                      "instruction": "Search for Beijing weather tomorrow."
                    }
                  ],
                  "parentMessageId": "msg-tool-1"
                }
              },
              "result_msg_id": "msg-tool-1"
            }
          ],
          "usage": {
            "cost": 0.000441,
            "totalInputTokens": 9793,
            "totalOutputTokens": 350,
            "totalTokens": 10143
          }
        }
      ],
      "performance": {
        "ttft": 1490,
        "duration": 11935,
        "latency": 13425,
        "tps": 29.33
      },
      "usage": {
        "totalInputTokens": 9793,
        "totalOutputTokens": 350,
        "totalTokens": 10143,
        "cost": 0.000441
      }
    },
    {
      "content": "",
      "createdAt": 1735526594643,
      "extra": {
        "parentMessageId": "msg-tool-1"
      },
      "id": "tasks-msg-tool-1-msg-task-hangzhou-msg-task-beijing",
      "meta": {},
      "role": "tasks",
      "tasks": [
        {
          "id": "msg-task-hangzhou",
          "role": "task",
          "content": "## Hangzhou Weather Report\n\nBased on the China Meteorological Administration data:\n\n- **Temperature**: 4-9°C\n- **Condition**: Cloudy during day, light rain at night\n- **Wind**: Northeast, light breeze\n- **Humidity**: 62.3%-93.6%",
          "parentId": "msg-tool-1",
          "createdAt": 1735526594643,
          "updatedAt": 1735526756262,
          "meta": {},
          "metadata": {
            "instruction": "Search for Hangzhou weather tomorrow."
          },
          "taskDetail": {
            "duration": 152955,
            "status": "completed",
            "threadId": "thd_hangzhou_weather",
            "title": "Research Hangzhou weather",
            "totalCost": 0.019886,
            "totalMessages": 22,
            "totalTokens": 143825,
            "totalToolCalls": 0
          }
        },
        {
          "id": "msg-task-beijing",
          "role": "task",
          "content": "## Beijing Weather Report\n\nBased on the China Weather Network data:\n\n- **Temperature**: -9°C to 0°C\n- **Condition**: Sunny and cold\n- **Wind**: North, <3 level\n- **AQI**: 57 (Good)",
          "parentId": "msg-tool-1",
          "createdAt": 1735526595647,
          "updatedAt": 1735526792430,
          "meta": {},
          "metadata": {
            "instruction": "Search for Beijing weather tomorrow."
          },
          "taskDetail": {
            "duration": 186928,
            "status": "completed",
            "threadId": "thd_beijing_weather",
            "title": "Research Beijing weather",
            "totalCost": 0.022058,
            "totalMessages": 28,
            "totalTokens": 178678,
            "totalToolCalls": 0
          }
        }
      ],
      "updatedAt": 1735526792430
    },
    {
      "id": "msg-assistant-summary",
      "role": "assistant",
      "content": "I've created two async tasks to research the weather. Both tasks are completed:\n\n## Hangzhou: 4-9°C, cloudy with light rain at night\n## Beijing: -9°C to 0°C, sunny and cold",
      "parentId": "msg-tool-1",
      "createdAt": 1735526795651,
      "updatedAt": 1735526813171,
      "meta": {},
      "model": "deepseek-chat",
      "provider": "deepseek",
      "metadata": {
        "tps": 28.27,
        "cost": 0.001078,
        "ttft": 1994,
        "latency": 10129,
        "duration": 8135,
        "totalTokens": 12530,
        "totalInputTokens": 12300,
        "totalOutputTokens": 230
      }
    }
  ],
  "messageMap": {
    "msg-user-1": {
      "id": "msg-user-1",
      "role": "user",
      "content": "Help me create two tasks to research the weather in Hangzhou and Beijing tomorrow.",
      "parentId": null,
      "createdAt": 1735526559382,
      "updatedAt": 1735526559382,
      "meta": {}
    },
    "msg-assistant-1": {
      "id": "msg-assistant-1",
      "role": "assistant",
      "content": "I'll help you create two async tasks to research the weather in Hangzhou and Beijing.",
      "parentId": "msg-user-1",
      "createdAt": 1735526560163,
      "updatedAt": 1735526585550,
      "meta": {},
      "model": "deepseek-chat",
      "provider": "deepseek",
      "tools": [
        {
          "id": "call_exec_tasks_1",
          "type": "builtin",
          "apiName": "execTasks",
          "arguments": "{\"tasks\": [{\"description\": \"Research Hangzhou weather\", \"instruction\": \"Search for Hangzhou weather tomorrow.\"}, {\"description\": \"Research Beijing weather\", \"instruction\": \"Search for Beijing weather tomorrow.\"}]}",
          "identifier": "lobe-gtd"
        }
      ],
      "metadata": {
        "tps": 29.33,
        "cost": 0.000441,
        "ttft": 1490,
        "latency": 13425,
        "duration": 11935,
        "totalTokens": 10143,
        "totalInputTokens": 9793,
        "totalOutputTokens": 350
      }
    },
    "msg-tool-1": {
      "id": "msg-tool-1",
      "role": "tool",
      "content": "Triggered 2 async tasks for execution:\n1. Research Hangzhou weather\n2. Research Beijing weather",
      "parentId": "msg-assistant-1",
      "tool_call_id": "call_exec_tasks_1",
      "createdAt": 1735526588116,
      "updatedAt": 1735526591337,
      "meta": {},
      "plugin": {
        "apiName": "execTasks",
        "arguments": "{\"tasks\": [{\"description\": \"Research Hangzhou weather\", \"instruction\": \"Search for Hangzhou weather tomorrow.\"}, {\"description\": \"Research Beijing weather\", \"instruction\": \"Search for Beijing weather tomorrow.\"}]}",
        "identifier": "lobe-gtd",
        "type": "builtin"
      },
      "pluginState": {
        "type": "execTasks",
        "tasks": [
          {
            "description": "Research Hangzhou weather",
            "instruction": "Search for Hangzhou weather tomorrow."
          },
          {
            "description": "Research Beijing weather",
            "instruction": "Search for Beijing weather tomorrow."
          }
        ],
        "parentMessageId": "msg-tool-1"
      }
    },
    "msg-task-hangzhou": {
      "id": "msg-task-hangzhou",
      "role": "task",
      "content": "## Hangzhou Weather Report\n\nBased on the China Meteorological Administration data:\n\n- **Temperature**: 4-9°C\n- **Condition**: Cloudy during day, light rain at night\n- **Wind**: Northeast, light breeze\n- **Humidity**: 62.3%-93.6%",
      "parentId": "msg-tool-1",
      "createdAt": 1735526594643,
      "updatedAt": 1735526756262,
      "meta": {},
      "metadata": {
        "instruction": "Search for Hangzhou weather tomorrow."
      },
      "taskDetail": {
        "duration": 152955,
        "status": "completed",
        "threadId": "thd_hangzhou_weather",
        "title": "Research Hangzhou weather",
        "totalCost": 0.019886,
        "totalMessages": 22,
        "totalTokens": 143825,
        "totalToolCalls": 0
      }
    },
    "msg-task-beijing": {
      "id": "msg-task-beijing",
      "role": "task",
      "content": "## Beijing Weather Report\n\nBased on the China Weather Network data:\n\n- **Temperature**: -9°C to 0°C\n- **Condition**: Sunny and cold\n- **Wind**: North, <3 level\n- **AQI**: 57 (Good)",
      "parentId": "msg-tool-1",
      "createdAt": 1735526595647,
      "updatedAt": 1735526792430,
      "meta": {},
      "metadata": {
        "instruction": "Search for Beijing weather tomorrow."
      },
      "taskDetail": {
        "duration": 186928,
        "status": "completed",
        "threadId": "thd_beijing_weather",
        "title": "Research Beijing weather",
        "totalCost": 0.022058,
        "totalMessages": 28,
        "totalTokens": 178678,
        "totalToolCalls": 0
      }
    },
    "msg-assistant-summary": {
      "id": "msg-assistant-summary",
      "role": "assistant",
      "content": "I've created two async tasks to research the weather. Both tasks are completed:\n\n## Hangzhou: 4-9°C, cloudy with light rain at night\n## Beijing: -9°C to 0°C, sunny and cold",
      "parentId": "msg-tool-1",
      "createdAt": 1735526795651,
      "updatedAt": 1735526813171,
      "meta": {},
      "model": "deepseek-chat",
      "provider": "deepseek",
      "metadata": {
        "tps": 28.27,
        "cost": 0.001078,
        "ttft": 1994,
        "latency": 10129,
        "duration": 8135,
        "totalTokens": 12530,
        "totalInputTokens": 12300,
        "totalOutputTokens": 230
      }
    }
  }
}
